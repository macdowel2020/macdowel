{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}Project Details{% endblock %}
{% block content %}

    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    {% if project.category == 'Farm' %}
                        <h1 class="m-0 text-dark"><a href="/farms/">FARMS</a></h1>
                    {% elif project.category == 'Machinery' %}
                        <h1 class="m-0 text-dark"><a href="/machines/">MACHINES</a></h1>

                    {% elif project.category == 'Machinery' %}
                        <h1 class="m-0 text-dark"><a href="/farms/">LAND</a></h1>

                    {% endif %}
                </div><!-- /.col -->


                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="/">HOME</a></li>
                        <li class="breadcrumb-item active">PROJECTS</li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card m-b-30">
                        <div class="card-body"><h5 class="header-title pb-3" style="text-align: center">
                            <b>{{ project.name |upper }} PROJECT DETAILS</b></h5>
                            <div class="general-label">
                                <div class="row">

                                    <div class="col-sm-3" style="text-align: center; height: 180px;">
                                        <img class="img-fluid rounded" src="{{ project.image.url }}"
                                             alt="Photo" style=" box-shadow: 0 8px 6px -6px black;">
                                        <label for="registration_number">{{ project.name |upper }} PROJECT</label>

                                        {% if request.user.is_superuser %}
                                            <button class="btn btn-success btn-block" data-toggle="modal"
                                                    style=" box-shadow: 0 8px 6px -6px black;"
                                                    data-target="#modal_project_photo">UPLOAD PROJECT PICTURE
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div class="col-sm-9">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group"><label for="registration_number">INCOME
                                                    RECEIVED</label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value=" UGX: {% if  total > approved_total %} {{ total |intcomma }}/= {% else %}
                               {{ total |intcomma }}/=  {% endif %}
"
                                                           placeholder="Enter Registration Number" required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group"><label
                                                        for="registration_number">EXPENDITURES</label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value=" UGX: {% if  total > approved_total %}
{{ approved_total |intcomma }}/= {% else %} {{ approved_total|intcomma }}/=  {% endif %}"
                                                           placeholder="Enter Registration Number" required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group"><label for="registration_number">CONTACT
                                                    PERSON</label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value="{{ project.contact }}"
                                                           placeholder="Enter Registration Number" required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group"><label for="registration_number">PROJECT
                                                    LOCATION</label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value="{{ project.address |upper}}"
                                                           placeholder="Enter Registration Number" required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group"><label for="registration_number">SERIAL NUMBER
                                                    </label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value="MACDOWEL-{{ project.code}}"
                                                           required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group"><label for="registration_number">CATEGORY</label>
                                                    <input type="text" id="registration_number"
                                                           name="registration_number"
                                                           value="{{ project.category |upper }}"
                                                           required="required"
                                                           disabled="disabled" class="form-control"></div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3 col-sm-6 col-12">
                                                <div class="info-box bg-info">
                                                    <span class="info-box-icon"><i
                                                            class="fa fa-arrow-circle-up"></i></span>

                                                    <div class="info-box-content">
                                                        <span class="info-box-text">Income</span>
                                                        <span class="info-box-number">UGX: {{ total|intcomma }}/=</span>

                                                        <div class="progress">
                                                            <div class="progress-bar" style="width: 70%"></div>
                                                        </div>
                                                        <span class="progress-description">Income is Normal</span>
                                                    </div>
                                                    <!-- /.info-box-content -->
                                                </div>
                                                <!-- /.info-box -->
                                                <h5 class="profile-username text-center"><b>INCOME: UGX:
                                                    {% if  total > approved_total %}
                                                        <span style="color: green"><i
                                                                class="fa fa-arrow-circle-o-up"></i> {{ total |intcomma }}/= </span>{% else %}
                                                        <span style="color: red"><i
                                                                class="fa fa-arrow-circle-o-down"></i> {{ total |intcomma }}/= </span> {% endif %}
                                                </b>
                                                </h5>
                                            </div>
                                            <!-- /.col -->
                                            <div class="col-md-3 col-sm-6 col-12">
                                                <div class="info-box bg-success">
                                                    <span class="info-box-icon"><i class="fa fa-thumbs-o-up"></i></span>

                                                    <div class="info-box-content">
                                                        <span class="info-box-text">Expenditure</span>
                                                        <span class="info-box-number">UGX: {{ approved_total|intcomma }}/=</span>

                                                        <div class="progress">
                                                            <div class="progress-bar" style="width: 70%"></div>
                                                        </div>
                                                        <span class="progress-description">Expenditure is Normal</span>
                                                    </div>
                                                    <!-- /.info-box-content -->
                                                </div>
                                                <!-- /.info-box -->

                                                <h5 class="profile-username text-center"><b>EXPENSES:
                                                    {% if  total < approved_total %}
                                                        <span style="color: red"><i
                                                                class="fa fa-arrow-circle-o-up"></i> {{ approved_total |intcomma }}/= </span>
                                                    {% else %}
                                                        <span style="color: green">{{ approved_total|intcomma }}/=</span>
                                                    {% endif %}
                                                </b>
                                                </h5>
                                            </div>
                                            <!-- /.col -->
                                            <div class="col-md-3 col-sm-6 col-12">
                                                <div class="info-box bg-warning">
                                                    <span class="info-box-icon"><i class="fa fa-calendar"></i></span>

                                                    <div class="info-box-content">
                                                        <span class="info-box-text">Profit</span>
                                                        <span class="info-box-number">UGX: {{ profit|intcomma }}/=</span>

                                                        <div class="progress">
                                                            <div class="progress-bar" style="width: 70%"></div>
                                                        </div>
                                                        <span class="progress-description">Wow! Profit is Normal</span>
                                                    </div>
                                                    <!-- /.info-box-content -->
                                                </div>
                                                <!-- /.info-box -->
                                            </div>
                                            <!-- /.col -->
                                            <div class="col-md-3 col-sm-6 col-12">
                                                <div class="info-box bg-danger">
                                                    <span class="info-box-icon"><i class="fa fa-comments-o"></i></span>

                                                    <div class="info-box-content">
                                                        <span class="info-box-text">Loss</span>
                                                        <span class="info-box-number"> UGX: {{ loss|intcomma }}/=</span>

                                                        <div class="progress">
                                                            <div class="progress-bar" style="width: 70%"></div>
                                                        </div>
                                                        <span class="progress-description">You dont have Losses</span>
                                                    </div>
                                                    <!-- /.info-box-content -->
                                                </div>
                                                <!-- /.info-box -->
                                            </div>
                                            <!-- /.col -->
                                        </div>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="card m-b-30">
                        <div class="card-body"><h5 class="header-title pb-3"><b>INCOME RECEIVED</b></h5>
                            <div class="general-label">

                                <div class="row">

                                    <div class="col-sm-12">
                                        <h1>
                                            <button type="button" class="btn btn-success btn-sm"
                                                    style="background-color: #4eaa24!important;  box-shadow: 0 8px 6px -6px black;"
                                                    data-toggle="modal"
                                                    data-target="#modal-income"><i class="fa fa-users"></i> ADD INCOME
                                            </button>
                                        </h1>
                                        <div class="col-sm-12">
                                            <table id="example1" class="table table-bordered table-striped dataTable"
                                                   role="grid"
                                                   aria-describedby="example1_info">
                                                <thead style="background-color: #b9c2af">
                                                <tr role="row">
                                                    <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-sort="ascending"
                                                        aria-label="Rendering engine: activate to sort column descending"
                                                        style="width: 20%;"> DATE
                                                    </th>
                                                    <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-sort="ascending"
                                                        aria-label="Rendering engine: activate to sort column descending"
                                                        style="width: 20%;"> ITEM
                                                    </th>


                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="Platform(s): activate to sort column ascending"
                                                        style="width: 20%;">
                                                        REASON
                                                    </th>


                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="CSS grade: activate to sort column ascending"
                                                        style="width: 10%;">
                                                        STAFF
                                                    </th>

                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="Platform(s): activate to sort column ascending"
                                                        style="width: 10%">
                                                        AMOUNT
                                                    </th>

                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="CSS grade: activate to sort column ascending"
                                                        style="width: 30%;">
                                                        ACTION
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                {% for u in incomes %}
                                                    <tr role="row" class="odd">

                                                        <td>{{ u.entered_on }}</td>
                                                        <td><b>{{ u.item }}</b></td>
                                                        <td>{{ u.reason }}</td>
                                                        <td>{{ u.staff.user.username |capfirst }}</td>
                                                        <td>{{ u.amount |intcomma }}/=</td>
                                                        <td style="text-align: right">

                                                            {% if request.user.is_superuser %}
                                                                <a href="#"
                                                                   class="btn  btn-outline-danger btn-block btn-sm"
                                                                   onclick="return confirm('Are you sure you want to delete this Transaction?');"
                                                                > <i
                                                                        class="fa fa-trash-o"></i> Delete</a>
                                                            {% else %}
                                                                <a href="#"
                                                                   class="btn  btn-outline-danger btn-block btn-sm disabled"
                                                                   onclick="return confirm('Are you sure you want to delete this Transaction?');"
                                                                > <i
                                                                        class="fa fa-trash-o"></i> Delete</a>

                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}

                                                </tbody>
                                                <tfoot>
                                                <tr style="background-color: #b9c2af">
                                                    <th rowspan="1" colspan="1">Date</th>
                                                    <th rowspan="1" colspan="1">Item</th>
                                                    <th rowspan="1" colspan="1">Reason</th>
                                                    <th rowspan="1" colspan="1">Staff</th>
                                                    <th rowspan="1" colspan="1">

                                                    </th>
                                                    <th rowspan="1" colspan="1" style="background-color: #939393"><span
                                                            style="color: white;">TOTAL:</span>
                                                        <b style="color: #fff1ff!important; font-size: 20px!important;">{{ total|intcomma }}/=</b>
                                                    </th>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>


                    <div class="card m-b-30">
                        <div class="card-body"><h5 class="header-title pb-3"><b>EXPENDITURES</b></h5>
                            <div class="general-label">

                                <div class="row">

                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header p-2">
                                                <ul class="nav nav-pills">
                                                    <li class="nav-item"><a class="nav-link active show"
                                                                            style="background-color: #807f6c; margin-right: 5px; color: whitesmoke;  box-shadow: 0 8px 6px -6px black;"
                                                                            href="#activity"
                                                                            data-toggle="tab"> REQUEST
                                                        EXPENSE</a>
                                                    </li>
                                                    <li class="nav-item"><a class="nav-link" href="#timeline"
                                                                            style="background-color: green; margin-right: 5px; color: whitesmoke;  box-shadow: 0 8px 6px -6px black;"
                                                                            data-toggle="tab">APPROVED EXPENDITURES</a>
                                                    </li>
                                                    <li class="nav-item"><a class="nav-link" href="#settings"
                                                                            style="background-color: #b81502; margin-right: 5px; color: whitesmoke;  box-shadow: 0 8px 6px -6px black;"
                                                                            data-toggle="tab">REJECTED EXPENDITURES</a>
                                                    </li>
                                                </ul>
                                            </div><!-- /.card-header -->
                                            <div class="card-body">
                                                <div class="tab-content">
                                                    <div class="tab-pane active show" id="activity">

                                                        <h1>
                                                            <button type="button" class="btn btn-success btn-sm"
                                                                    style="background-color: #007baa!important;  box-shadow: 0 8px 6px -6px black;"
                                                                    data-toggle="modal"
                                                                    data-target="#modal-request"><i
                                                                    class="fa fa-users"></i> REQUEST
                                                                EXPENDITURE
                                                            </button>
                                                        </h1>
                                                        <table id="example4"
                                                               class="table table-bordered table-striped dataTable"
                                                               role="grid"
                                                               aria-describedby="example1_info">
                                                            <thead style="background-color: #afc270">
                                                            <tr role="row">
                                                                <th class="sorting_asc" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-sort="ascending"
                                                                    aria-label="Rendering engine: activate to sort column descending"
                                                                    style="width: 20%;"> Item
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 20%;">
                                                                    Date
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 10%;">
                                                                    Staff
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 20%;">
                                                                    Amount
                                                                </th>
                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 10%;">
                                                                    Status
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 30%;">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>

                                                            {% for u in pending_expenditures %}
                                                                <tr role="row" class="odd">

                                                                    <td><b>{{ u.item }}</b></td>

                                                                    <td>{{ u.entered_on }}</td>
                                                                    <td>{{ u.staff.user.username }}</td>
                                                                    <td>{{ u.amount|intcomma }}/=</td>
                                                                    <td style="text-align: center">
                                                                        <i class="fa fa-warning"></i>
                                                                        <span class=" badge badge-warning"
                                                                              style="padding: 5px!important;">Pending</span>
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        {% if request.user.is_superuser %}
                                                                            <a href="/approve_request/?code={{ u.code }}"
                                                                               class="btn  btn-success btn-sm"
                                                                               onclick="return confirm('Confirm to Perform this action?');"
                                                                            ><i
                                                                                    class="fa fa-check"></i> Approve
                                                                            </a>
                                                                        {% else %}
                                                                            <a href="/approve_request/?code={{ u.code }}"
                                                                               class="btn  btn-success btn-sm disabled"
                                                                               onclick="return confirm('Confirm to Perform this action?');"
                                                                            ><i
                                                                                    class="fa fa-check"></i> Approve
                                                                            </a>
                                                                        {% endif %}

                                                                        {% if request.user.is_superuser %}

                                                                            <button data-toggle="modal"
                                                                                    data-target="#modal-reject"
                                                                                    class="btn  btn-danger btn-sm"

                                                                                    onclick="document.getElementById('ex_code').value='{{ u.code }}';
                                                                                            {#                                                                                document.getElementById('ex_reason').value='{{ c.balance }}'#}
                                                                                            "
                                                                            ><i
                                                                                    class="fa fa-ban"></i> Reject
                                                                            </button>
                                                                        {% else %}


                                                                        {% endif %}


                                                                    </td>
                                                                </tr>
                                                            {% endfor %}

                                                            </tbody>
                                                            <tfoot>
                                                            <tr style="background-color: #e1f08b">
                                                                <th rowspan="1" colspan="1">Item</th>

                                                                <th rowspan="1" colspan="1">Date</th>
                                                                <th rowspan="1" colspan="1">Staff</th>
                                                                <th rowspan="1" colspan="2">
                                                                </th>

                                                                <th rowspan="1" colspan="1"
                                                                    style="color: white; background-color: rgba(222,8,13,0.96)!important;">
                                                                    TOTAL: <b
                                                                        style=" color: #fff1ff!important; font-size: 20px!important;">{{ pending_total }}/=</b>
                                                                </th>
                                                            </tr>
                                                            </tfoot>
                                                        </table>

                                                    </div>
                                                    <!-- /.tab-pane -->
                                                    <div class="tab-pane" id="timeline">


                                                        <table id="example6"
                                                               class="table table-bordered table-striped dataTable"
                                                               role="grid"
                                                               aria-describedby="example1_info">
                                                            <thead style="background-color: #b9c2af">
                                                            <tr role="row">
                                                                <th class="sorting_asc" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-sort="ascending"
                                                                    aria-label="Rendering engine: activate to sort column descending"
                                                                    style="width: 20%;"> DATE
                                                                </th>
                                                                <th class="sorting_asc" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-sort="ascending"
                                                                    aria-label="Rendering engine: activate to sort column descending"
                                                                    style="width: 20%;"> ITEM
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 20%;">
                                                                    DESCRIPTION
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 10%;">
                                                                    STAFF
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 10%">
                                                                    AMOUNT
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 10%">
                                                                    STATUS
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 30%;">
                                                                    ACTION
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>

                                                            {% for u in approved_expenditures %}
                                                                <tr role="row" class="odd">

                                                                    <td><b>{{ u.entered_on }}</b></td>

                                                                    <td>{{ u.item }}</td>
                                                                    <td>{{ u.description }}</td>
                                                                    <td>{{ u.staff.user.username }}</td>
                                                                    <td>{{ u.amount |intcomma }}/=</td>
                                                                    <td style="text-align: center">
                                                                        <i class="fa fa-check"></i>
                                                                        <span class=" badge badge-success"
                                                                              style="padding: 5px!important;">Approved</span>
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        <a href="/#/?code={{ u.code }}"
                                                                           class="btn  btn-info btn-block btn-sm"><i
                                                                                class="fa fa-file-archive-o"></i> Report
                                                                        </a>

                                                                        {% if request.user.is_superuser %}
                                                                            <button data-toggle="modal"
                                                                                    data-target="#modal-reject"
                                                                                    class="btn  btn-danger btn-block btn-sm"

                                                                                    onclick="document.getElementById('ex_code').value='{{ u.code }}';
                                                                                            {#                                                                                document.getElementById('ex_reason').value='{{ c.balance }}'#}
                                                                                            "
                                                                            ><i
                                                                                    class="fa fa-ban"></i> Reject
                                                                            </button>
                                                                        {% endif %}
                                                                    </td>
                                                                </tr>
                                                            {% endfor %}

                                                            </tbody>
                                                            <tfoot>
                                                            <tr style="background-color: #b9c2af">
                                                                <th rowspan="1" colspan="1">DATE</th>
                                                                <th rowspan="1" colspan="1">ITEM</th>
                                                                <th rowspan="1" colspan="1">DESCRIPTION</th>
                                                                <th rowspan="1" colspan="1">STAFF</th>


                                                                <th rowspan="1" colspan="2"
                                                                    style="background-color: #939393; text-align: center!important;"><span
                                                                        style="color: white;">TOTAL: </span>
                                                                    <b style="color: #fff1ff!important; font-size: 20px!important;">{{ approved_total|intcomma }}/=</b>
                                                                </th>
                                                                <th rowspan="1" colspan="1">ACTION</th>
                                                            </tr>
                                                            </tfoot>
                                                        </table>
                                                    </div>
                                                    <!-- /.tab-pane -->

                                                    <div class="tab-pane" id="settings">
                                                        <table id="example5"
                                                               class="table table-bordered table-striped dataTable"
                                                               role="grid"
                                                               aria-describedby="example1_info">
                                                            <thead style="background-color: #afc270">
                                                            <tr role="row">


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 30%;">
                                                                    DATE
                                                                </th>

                                                                <th class="sorting_asc" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-sort="ascending"
                                                                    aria-label="Rendering engine: activate to sort column descending"
                                                                    style="width: 20%;"> ITEM
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 10%;">
                                                                    REQUEST BY
                                                                </th>


                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="Platform(s): activate to sort column ascending"
                                                                    style="width: 20%;">
                                                                    AMOUNT
                                                                </th>
                                                                <th class="sorting_asc" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-sort="ascending"
                                                                    aria-label="Rendering engine: activate to sort column descending"
                                                                    style="width: 20%;"> REASON
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 10%;">
                                                                    STATUS
                                                                </th>

                                                                <th class="sorting" tabindex="0"
                                                                    aria-controls="example1"
                                                                    rowspan="1"
                                                                    colspan="1"
                                                                    aria-label="CSS grade: activate to sort column ascending"
                                                                    style="width: 30%;">
                                                                    ACTION
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>

                                                            {% for u in rejected_expenditures %}
                                                                <tr role="row" class="odd">
                                                                    <td>{{ u.entered_on }}</td>
                                                                    <td><b>{{ u.item }}</b></td>
                                                                    <td>{% if u.staff.user.first_name %}
                                                                        {{ u.staff.user.first_name }}
                                                                        {{ u.staff.user.last_name }}
                                                                        {% else %}{{ u.staff.user.username |capfirst }} {% endif %}</td>
                                                                    <td>{{ u.amount|intcomma }}</td>
                                                                    <td>{{ u.reason }}</td>
                                                                    <td style="text-align: center">
                                                                        <b>X</b>
                                                                        <span class=" badge badge-danger"
                                                                              style="padding: 5px!important;">Rejected</span>
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        {% if request.user.is_superuser %}

                                                                            <a href="/delete_expenditure/?code={{ u.code }}"
                                                                               class="btn  btn-outline-danger btn-sm"
                                                                               onclick="return confirm('This Can not be Reverted. Are you sure you want to delete Permanently?');"
                                                                            > <i
                                                                                    class="fa fa-trash-o"></i>
                                                                                Delete</a>
                                                                        {% else %}
                                                                            <a href="/delete_expenditure/?code={{ u.code }}"
                                                                               class="btn  btn-outline-danger btn-sm disabled"
                                                                               onclick="return confirm('This Can not be Reverted. Are you sure you want to delete Permanently?');"
                                                                            > <i
                                                                                    class="fa fa-trash-o"></i>
                                                                                Delete</a>

                                                                        {% endif %}
                                                                    </td>
                                                                </tr>
                                                            {% endfor %}

                                                            </tbody>
                                                            <tfoot>
                                                            <tr style="background-color: #e1f08b">
                                                                <th rowspan="1" colspan="1">DATE</th>

                                                                <th rowspan="1" colspan="1">ITEM</th>
                                                                <th rowspan="1" colspan="1">REQUEST BY</th>

                                                                <th rowspan="1" colspan="1"
                                                                    style="background-color: rgba(222,8,13,0.96)!important;">
                                                                    <span style="color: white">TOTAL:</span> <b
                                                                        style="color: #fff1ff!important; font-size: 20px!important;">{{ rejected_total |intcomma }}/=</b>
                                                                </th>
                                                                <th rowspan="1" colspan="1">REASON</th>
                                                                <th rowspan="1" colspan="1">STATUS</th>

                                                                <th rowspan="1" colspan="1">ACTION</th>
                                                            </tr>
                                                            </tfoot>
                                                        </table>
                                                    </div>
                                                    <!-- /.tab-pane -->
                                                </div>
                                                <!-- /.tab-content -->
                                            </div><!-- /.card-body -->
                                        </div>
                                        <!-- /.nav-tabs-custom -->
                                    </div>


                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="card m-b-30">
                        <div class="card-body"><h5 class="header-title pb-3"><b>INVENTORY </b></h5>
                            <div class="general-label">

                                <div class="row">

                                    <div class="col-sm-12">
                                    <h3>
                                         <button type="button" class="btn btn-success btn-sm title"
                                                style="background-color: #4eaa24!important;  box-shadow: 0 8px 6px -6px black;"
                                                data-toggle="modal"
                                                data-target="#modal-inventory"><i class="fa fa-cart-arrow-down"></i> ADD
                                            ITEM
                                        </button>
                                    </h3>


                                        <div class="col-sm-12">
                                            <table id="example7" class="table table-bordered table-striped dataTable"
                                                   role="grid"
                                                   aria-describedby="example1_info">
                                                <thead style="background-color: #b9c2af">
                                                <tr role="row">
                                                    <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-sort="ascending"
                                                        aria-label="Rendering engine: activate to sort column descending"
                                                        style="width: 20%;"> DATE
                                                    </th>
                                                    <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-sort="ascending"
                                                        aria-label="Rendering engine: activate to sort column descending"
                                                        style="width: 20%;"> ITEM
                                                    </th>

                                                    <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-sort="ascending"
                                                        aria-label="Rendering engine: activate to sort column descending"
                                                        style="width: 20%;"> DESCRIPTION
                                                    </th>


                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="Platform(s): activate to sort column ascending"
                                                        style="width: 20%;">
                                                        QTY
                                                    </th>


                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="CSS grade: activate to sort column ascending"
                                                        style="width: 10%;">
                                                        UNIT PRICE
                                                    </th>

                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="Platform(s): activate to sort column ascending"
                                                        style="width: 10%">
                                                        TOTAL PRICE
                                                    </th>

                                                    <th class="sorting" tabindex="0" aria-controls="example1"
                                                        rowspan="1"
                                                        colspan="1"
                                                        aria-label="CSS grade: activate to sort column ascending"
                                                        style="width: 30%;">
                                                        ACTION
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% if  inventory %}
                                                    {% for u in inventory %}
                                                        <tr role="row" class="odd">

                                                            <td>{{ u.date }}</td>
                                                            <td>{{ u.item }}</td>
                                                            <td>{{ u.description }}</td>
                                                            <td>{{ u.qty }}</td>
                                                            <td>{{ u.unit_price | intcomma }}</td>
                                                            <td>{{ u.total_price |intcomma }}</td>
                                                            <td style="text-align: right">
                                                                {% if request.user.is_superuser %}
                                                                    <a href="/delete_inventory/?code={{ u.code }}"
                                                                       class="btn  btn-outline-danger btn-block btn-sm"
                                                                       onclick="return confirm('Are you sure you want to Remove this Item?');"
                                                                    > <i
                                                                            class="fa fa-trash-o"></i> Remove</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                {% else %}
                                                    <tr role="row" class="odd"><p style="color: red">No Records Yet!</p>
                                                    </tr>
                                                {% endif %}


                                                </tbody>
                                                <tfoot>
                                                <tr style="background-color: #b9c2af">
                                                    <th rowspan="1" colspan="1">DATE</th>
                                                    <th rowspan="1" colspan="1">ITEM</th>
                                                    <th rowspan="1" colspan="1">DESCRIPTION</th>
                                                    <th rowspan="1" colspan="1">QTY</th>
                                                    <th rowspan="1" colspan="1">UNIT PRICE</th>
                                                    <th rowspan="1" colspan="1">TOTAL PRICE</th>
                                                    <th rowspan="1" colspan="1">ACTION</th>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                    {% if request.user.is_superuser %}
                        <div class="card m-b-30">
                            <div class="card-body"><h5 class="header-title pb-3"><b>PROJECT STAFF</b></h5>
                                <div class="general-label">

                                    <div class="row">

                                        <div class="col-sm-12">
                                            <h1>
                                                {#                                            <button type="button" class="btn btn-success btn-sm"#}
                                                {#                                                    style="background-color: #007baa!important;" data-toggle="modal"#}
                                                {#                                                    data-target="#modal-income"><i class="fa fa-users"></i> ADD INCOME#}
                                                {#                                            </button>#}
                                            </h1>
                                            <div class="col-sm-12">
                                                <table id="example1"
                                                       class="table table-bordered table-striped dataTable"
                                                       role="grid"
                                                       aria-describedby="example1_info">
                                                    <thead style="background-color: #b9c2af">
                                                    <tr role="row">
                                                        <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-sort="ascending"
                                                            aria-label="Rendering engine: activate to sort column descending"
                                                            style="width: 20%;"> JOINED ON
                                                        </th>
                                                        <th class="sorting_asc" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-sort="ascending"
                                                            aria-label="Rendering engine: activate to sort column descending"
                                                            style="width: 20%;"> STAFF NAME
                                                        </th>


                                                        <th class="sorting" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-label="Platform(s): activate to sort column ascending"
                                                            style="width: 20%;">
                                                            CONTACT
                                                        </th>


                                                        <th class="sorting" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-label="CSS grade: activate to sort column ascending"
                                                            style="width: 10%;">
                                                            EMAIL
                                                        </th>

                                                        <th class="sorting" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-label="Platform(s): activate to sort column ascending"
                                                            style="width: 10%">
                                                            DEPARTMENT
                                                        </th>

                                                        <th class="sorting" tabindex="0" aria-controls="example1"
                                                            rowspan="1"
                                                            colspan="1"
                                                            aria-label="CSS grade: activate to sort column ascending"
                                                            style="width: 30%;">
                                                            ACTION
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>

                                                    {% for u in staff %}
                                                        <tr role="row" class="odd">

                                                            <td>{{ u.joined_on }}</td>
                                                            <td><b>{% if u.user.first_name %}{{ u.user.first_name }}
                                                                {{ u.user.last_name }}
                                                            {% else %} {{ u.user.username |upper }} {% endif %}</b></td>
                                                            <td>{{ u.contact }}</td>
                                                            <td>{{ u.user.email }}</td>
                                                            <td>{{ u.department.name }}</td>
                                                            <td style="text-align: right">
                                                                {% if request.user.is_superuser %}
                                                                    <a href="#"
                                                                       class="btn  btn-outline-danger btn-block btn-sm"
                                                                       onclick="return confirm('Are you sure you want to Remove this Staff?');"
                                                                    > <i
                                                                            class="fa fa-trash-o"></i> Remove</a>
                                                                {% else %}
                                                                    <a href="#"
                                                                       class="btn  btn-outline-danger btn-block btn-sm disabled"
                                                                       onclick="return confirm('Are you sure you want to Remove this Staff?');"
                                                                    > <i
                                                                            class="fa fa-trash-o"></i> Remove</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}

                                                    </tbody>
                                                    <tfoot>
                                                    <tr style="background-color: #b9c2af">
                                                        <th rowspan="1" colspan="1">JOINED ON</th>
                                                        <th rowspan="1" colspan="1">STAFF NAME</th>
                                                        <th rowspan="1" colspan="1">CONTACT</th>
                                                        <th rowspan="1" colspan="1">EMAIL</th>
                                                        <th rowspan="1" colspan="1">DEPARTMENT</th>
                                                        <th rowspan="1" colspan="1">ACTION</th>
                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>






    {#       ==================  MODALS   ============================    #}
    {#   INCOME MODAL #}
    <div class="modal fade" id="modal-income">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-info" style="background-color: #afc270!important;">
                <div class="modal-header">
                    <h4 class="modal-title">ADD NEW INCOME</h4>
                    <button type="button" class="close" style="color: #ff1a06;" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/add_farm_income/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}" hidden>
                        <div class="form-group">
                            <label for="item">SHORT DESCRIPTION *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   placeholder="Enter short description for income" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">AMOUNT *</label>
                            <input type="text" class="form-control" id="amount" name="amount"
                                   placeholder="Enter Amount" required>
                        </div>

                        <div class="form-group">
                            <label for="reason">REASON *</label>
                            <input type="text" class="form-control" id="reason" name="reason"
                                   placeholder="Enter Reason" required>
                        </div>

                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <input type="text" class="form-control" id="description" name="description"
                                   placeholder="Enter Description" required>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light" style="background-color: green!important;">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    {#   PENDING EXPENDITURE MODAL #}
    <div class="modal fade" id="modal-request">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-info" style="background-color: #afc270!important;">
                <div class="modal-header">
                    <h4 class="modal-title">{{ project.name |upper }} EXPENDITURE</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/request_expenditure/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}" hidden>
                        <div class="form-group">
                            <label for="item">ITEM *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   placeholder="Enter Item" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">AMOUNT *</label>
                            <input type="text" class="form-control" id="amount" name="amount"
                                   placeholder="Enter Amount" required>
                        </div>

                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <textarea type="text" class="form-control" id="description" name="description"
                                      placeholder="Enter Description" required> </textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light" style="background-color: green!important;">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modal_project_photo" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLongTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content ">
                <div class="modal-header" style="background-color: #285d18; text-align: center!important;">
                    <h5 class="modal-title" id="modal-company" style="text-align: center">UPLOAD PROJECT PHOTO</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form class="form-horizontal" method="post" action="/update_project_photo/?code={{ project.code }}"
                      enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="modal-body" style="background-color: rgba(161,255,131,0.55)">

                        <div class="form-group">
                            <input type="text" class="form-control" value="{{ project.code }}" id="code" name="code"
                                   hidden>

                            <div class="col-sm-12">
                                {#                                <label for="username" class="control-label">User Name *</label>#}
                                {#                                <input type="text" class="form-control" id="username" name="username"#}
                                {#                                       placeholder="Enter User Name" required>#}

                                <input type="file" class="custom-file-input" id="image" name="image">
                                <label class="custom-file-label" for="logo">Choose Image File</label>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer" style="background-color: #285d18">
                        <button type="button" class="btn btn-danger" data-dismiss="modal"><i
                                class="fa fa-close"></i> Close
                        </button>
                        <button type="submit" class="btn btn-success">UPLOAD PHOTO</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-reject">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-danger">
                <div class="modal-header">
                    <h4 class="modal-title">REJECT EXPENSE</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/reject_request/?code={{ pending_expenditures.code }}" method="post"
                      enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="ex_code" name="code" hidden>

                        {#                        <div class="form-group">#}
                        {#                            <label for="amount">Amount Requested *</label>#}
                        {#                            <input type="text" class="form-control" id="amount" name="amount"#}
                        {#                                   placeholder="Enter Amount" disabled>#}
                        {#                        </div>#}

                        <div class="form-group">
                            <label for="reason">Reason For Rejection *</label>
                            <textarea type="text" class="form-control" id="ex_reason" name="reason"
                                      placeholder="Enter the Reason why the request is Rejected!" required></textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-outline-light">Submit</button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade" id="modal-inventory">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-info" style="background-color: #afc270!important;">
                <div class="modal-header">
                    <h4 class="modal-title">ADD INVENTORY ITEM</h4>
                    <button type="button" class="close" style="color: #ff1a06;" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/farm_inventory/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}" hidden>

                        <div class="form-group">
                            <label for="item">DATE OF PURCHASE *</label>
                            <input type="date" class="form-control" id="date" name="date"
                                   placeholder="Enter Date of Purchase" required>
                        </div>

                        <div class="form-group">
                            <label for="item">ITEM *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   placeholder="Enter Item" required>
                        </div>


                        <div class="form-group">
                            <label for="amount">QUANTITY *</label>
                            <input type="number" class="form-control parameter qty" id="qty" name="qty" min="0"
                                   placeholder="Enter Quantity" required>
                        </div>

                        <div class="form-group">
                            <label for="reason">UNIT PRICE *</label>
                            <input type="number" class="form-control parameter unit_price" id="unit_price"
                                   name="unit_price"
                                   placeholder="Enter Unit Price" required>
                        </div>


                        <div class="form-group">
                            <label for="reason">TOTAL PRICE</label>
                            <input type="number" class="form-control total" id="unit_price" name="unit_price"
                                   disabled>
                        </div>

                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <textarea type="text" class="form-control" id="description" name="description"
                                      placeholder="Enter Description" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="reference_copy">UPLOAD REFERENCE PHOTOCOPY</label>
                            <input type="file" class="form-control-file" id="reference_copy" name="reference_copy">
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light" style="background-color: green!important;">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

{% endblock %}

{% block javascript %}
    <script>
        // === PEREZ WORKING CODE ===

        $(document).ready(function () {
            $(".parameter").on("input", function () {
                var total = 0;
                var qty = $(".qty").val();
                var unit_price = $(".unit_price").val();
                console.log('xxxxx', qty, unit_price);
                console.log('xxxxx', parseFloat(qty) * parseFloat(unit_price));

                if (!isNaN(parseInt($(this).val()))) {
                    total = parseFloat(qty) * parseFloat(unit_price);
                    console.log('my total', total);
                    $(".total").val(total);
                }

            });
        });


    </script>

{% endblock %}
