{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}Project Details{% endblock %}
{% block content %}


    <div class="hk-pg-header">
        <h4 class="hk-pg-title"><span class="pg-title-icon"><span class="feather-icon"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="feather feather-toggle-right"><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle
                cx="16" cy="12" r="3"></circle></svg></span></span>

            {% if project.category == 'Farm' %}
                <a href="/farms/" style="color: black">FARM PROJECT</a>
            {% elif project.category == 'Machinery' %}
                <a href="/machines/" style="color: black">MACHINE PROJECT</a>

            {% elif project.category == 'Land' %}
                <a href="/farms/" style="color: black">LAND PROJECT</a>

            {% endif %}
        </h4>
    </div>

    <div class="row">
        <div class="col-xl-12">
            <section class="hk-sec-wrapper">
                <h5 class="hk-sec-title text-center"><b>{{ project.project_name |upper }}
                    IN {{ project.location.location |upper }}</b></h5>

                <div class="row">
                    <div class="col-sm-3">
                        <div class="row">
                            <div class="col-sm-12" style="text-align: center; ">
                                <img class="img-fluid rounded" src="{{ project.image.url }}"
                                     alt="Photo" style=" box-shadow: 0 8px 6px -6px black;">

                                <label for="registration_number" class="m-2">{{ project.project_name |upper }}
                                    PROJECT</label>

                                {% if request.user.is_superuser %}
                                    <button class="btn btn-primary btn-block" data-toggle="modal"
                                            style=" box-shadow: 0 8px 6px -6px black;"
                                            data-target="#modal_project_photo">UPLOAD PROJECT PICTURE
                                    </button>
                                {% endif %}

                                <br/>
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-9">
                        {{ project }}

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group"><label for="registration_number">INCOME
                                    RECEIVED</label>
                                    <input type="text" id="registration_number"
                                           name="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           value="{{ total |intcomma }}"
                                           placeholder="Enter Registration Number" required="required"
                                           class="form-control"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="registration_number">EXPENDITURES</label>
                                    <input type="text" id="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           name="registration_number"
                                           value=" UGX:{% if  total > approved_total %}{{ approved_total |intcomma }}
{% else %} {{ approved_total|intcomma }} {% endif %}"
                                           placeholder="Enter Registration Number" required="required"
                                           class="form-control"></div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group"><label for="registration_number">CONTACT
                                    PERSON</label>
                                    <input type="text" id="registration_number"
                                           name="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           value="{{ project.contact }}"
                                           class="form-control"></div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group"><label for="registration_number">PROJECT
                                    LOCATION</label>
                                    <input type="text" id="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           name="registration_number"
                                           value="{{ project.location.location |upper }}"
                                           placeholder="Enter Registration Number" required="required"
                                           class="form-control"></div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group"><label for="registration_number">SERIAL NUMBER
                                </label>
                                    <input type="text" id="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           name="registration_number"
                                           value="MACDOWEL-{{ project.code }}"
                                           required="required"
                                           class="form-control"></div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group"><label
                                        for="registration_number">CATEGORY</label>
                                    <input type="text" id="registration_number"
                                           name="registration_number"
                                           style="background-color: #c9c9c9!important;"
                                           value="{{ project.category |upper }}"
                                           required="required"
                                           class="form-control"></div>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <span class="d-block font-11 font-weight-500 text-dark text-uppercase mb-10">Income</span>
                                        <div class="d-flex align-items-end justify-content-between">
                                            <div>
                                                <p class="d-block">
																	<span class=" text-dark">UGX <span
                                                                            class="text-danger ">{% if  total > approved_total %}
                                                                        <span style="color: green"><i
                                                                                class="fa fa-arrow-circle-o-up"></i> {{ total |intcomma }}/= </span>{% else %}
                                                                        <span style="color: red"><i
                                                                                class="fa fa-arrow-circle-o-down"></i> {{ total |intcomma }}/= </span> {% endif %}</span></span>

                                                </p>
                                            </div>
                                            <div>

                                            </div>
                                        </div>
                                        <div class="progress progress-bar-xs mt-30">
                                            <div class="progress-bar bg-primary w-{{ total |safe }}" role="progressbar"
                                                 aria-valuenow="55" aria-valuemin="0"
                                                 aria-valuemax="100"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <span class="d-block font-11 font-weight-500 text-dark text-uppercase mb-10">Expenditure</span>
                                        <div class="d-flex align-items-end justify-content-between">
                                            <div>
                                                <p class="d-block">
																	<span class=" text-dark">UGX <span
                                                                            class="text-danger ">{% if  total < approved_total %}
                                                                        <span style="color: green"><i
                                                                                class="fa fa-arrow-circle-o-up"></i> {{ approved_total |intcomma }}/= </span>{% else %}
                                                                        <span style="color: red"><i
                                                                                class="fa fa-arrow-circle-o-down"></i> {{ approved_total |intcomma }}/= </span> {% endif %}</span></span>

                                                </p>
                                            </div>
                                            <div>

                                            </div>
                                        </div>
                                        <div class="progress progress-bar-xs mt-30">
                                            <div class="progress-bar bg-primary w-{{ approved_total | safe }}"
                                                 role="progressbar"
                                                 aria-valuenow="55" aria-valuemin="0"
                                                 aria-valuemax="100"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>


                            <div class="col-md-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <span class="d-block font-11 font-weight-500 text-dark text-uppercase mb-10">Profit</span>
                                        <div class="d-flex align-items-end justify-content-between">
                                            <div>
                                                <p class="d-block">
                                                    <span class=" text-dark">UGX: {{ profit|intcomma }}/=</span>
                                                </p>
                                            </div>
                                            <div>

                                            </div>
                                        </div>
                                        <div class="progress progress-bar-xs mt-30">
                                            <div class="progress-bar bg-primary w-{{ profit |safe }}" role="progressbar"
                                                 aria-valuenow="55" aria-valuemin="0"
                                                 aria-valuemax="100"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>


                            <div class="col-md-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <span class="d-block font-11 font-weight-500 text-dark text-uppercase mb-10">Loss</span>
                                        <div class="d-flex align-items-end justify-content-between">
                                            <div>
                                                <p class="d-block">
                                                    <span class=" text-dark">UGX: {{ loss|intcomma }}/=</span>
                                                </p>
                                            </div>
                                            <div>

                                            </div>
                                        </div>
                                        <div class="progress progress-bar-xs mt-30">
                                            <div class="progress-bar bg-primary w-{{ loss |safe }}" role="progressbar"
                                                 aria-valuenow="{{ loss }}" aria-valuemin="0"
                                                 aria-valuemax="100"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                ANALYSIS
                            </div>
                            <div class="col-md-6">
                                <h5 class="profile-username "><b>INCOME RECEIVED:
                                    {% if  total > approved_total %}
                                        <span style="color: green"><i
                                                class="fa fa-arrow-circle-o-up"></i> {{ total |intcomma }}/= </span>{% else %}
                                        <span style="color: red"><i
                                                class="fa fa-arrow-circle-o-down"></i> {{ total |intcomma }}/= </span> {% endif %}
                                </b>
                                </h5>
                            </div>
                            <div class="col-md-6">
                                <h5 class="profile-username "><b>EXPENSES:
                                    {% if  total < approved_total %}
                                        <span style="color: red"><i
                                                class="fa fa-arrow-circle-o-up"></i> {{ approved_total |intcomma }}/= </span>
                                    {% else %}
                                        <span style="color: green">{{ approved_total|intcomma }}/=</span>
                                    {% endif %}
                                </b>
                                </h5>
                            </div>
                        </div>

            </section>

            <section class="hk-sec-wrapper">
                <h5 class="hk-sec-title "><b>INCOME RECEIVED</b></h5>
                <button type="button" class="btn btn-primary btn-sm"
                        style="background-color: #19385a"
                        data-toggle="modal"
                        data-target="#modal-income"><i class="fa fa-users"></i> ADD INCOME
                </button>
                <div class="row">

                    <div class="col-sm-12">
                        <div class="table-wrap">

                            <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                   data-tablesaw-mode="swipe" data-tablesaw-sortable="" data-tablesaw-sortable-switch=""
                                   data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8446" style="">
                                <thead>
                                <tr>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="persist"
                                        class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                        data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">S/N<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-sortable-default-col=""
                                        data-tablesaw-priority="3"
                                        class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                        data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn">DATE<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn">PARTICULAR<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn"><abbr
                                        >SOURCE</abbr><span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">AMOUNT (UGX)<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">ACTION<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>

                                {% for u in incomes %}
                                    <tr>
                                        <td class="title tablesaw-swipe-cellpersist"><a
                                                href="javascript:void(0)">{{ forloop.counter }}</a>
                                        </td>
                                        <td>{{ u.date |date }}</td>
                                        <td>{{ u.item }}</td>
                                        <td>{{ u.category }}</td>
                                        <td>{{ u.amount |intcomma }}/=</td>
                                        <td>
                                            {% if request.user.is_superuser %}
                                                <a href="/delete_income/?code={{ u.code }}"
                                                   class="btn  btn-outline-danger btn-block btn-sm"
                                                   onclick="return confirm('Are you sure you want to delete this Transaction?');"
                                                > <i
                                                        class="fa fa-trash-o"></i> Delete</a>
                                            {% else %}


                                            {% endif %}
                                        </td>
                                    </tr>

                                {% endfor %}

                                </tbody>
                                <tfoot>
                                <tr style="background-color: #c9c9c9">
                                    <th rowspan="1" colspan="1">S/N</th>
                                    <th rowspan="1" colspan="1">DATE</th>
                                    <th rowspan="1" colspan="1">PARTICULAR</th>
                                    <th rowspan="1" colspan="1">SOURCE</th>
                                    <th rowspan="1" colspan="1">AMOUNT</th>

                                    <th rowspan="1" colspan="1" style="background-color: #939393;color: whitesmoke">
                                        <span>TOTAL:</span>
                                        <b style=" font-size: 20px!important;">{{ total|intcomma }}/=</b>
                                    </th>
                                </tr>
                                </tfoot>
                            </table>
                        </div>

                    </div>
                </div>
            </section>

            <section class="hk-sec-wrapper">
                <h5 class="hk-sec-title"><b>EXPENSES</b></h5>

                <div class="row">
                    <div class="col-sm">
                        <div class="button-list mb-15">

                            <button class="btn btn-primary collapsed active show" type="button" data-toggle="collapse"
                                    data-target="#request_expense" aria-expanded="false"
                                    aria-controls="collapseExample">
                                REQUEST EXPENSE
                            </button>

                            <button class="btn btn-primary collapsed" type="button" data-toggle="collapse"
                                    data-target="#aproved_expenses" aria-expanded="false"
                                    aria-controls="collapseExample">
                                APPROVED EXPENSES
                            </button>

                            <button class="btn btn-primary collapsed" type="button" data-toggle="collapse"
                                    data-target="#rejected_expenses" aria-expanded="false"
                                    aria-controls="collapseExample">
                                REJECTED EXPENSES
                            </button>
                        </div>
                        <div class="collapse show" id="request_expense" style="">
                            <div class="card card-body">
                                <div class="table-wrap">
                                    <h5 class="hk-sec-title text-center"><b>REQUESTED EXPENSES</b></h5>
                                    <button type="button" class="btn btn-primary btn-sm"
                                            style="background-color: #19385a!important;  box-shadow: 0 8px 6px -6px #ffffff!important;"
                                            data-toggle="modal"
                                            data-target="#modal-request"><i
                                            class="fa fa-users"></i> REQUEST
                                        EXPENDITURE
                                    </button>

                                    <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                           data-tablesaw-mode="swipe" data-tablesaw-sortable=""
                                           data-tablesaw-sortable-switch=""
                                           data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8446"
                                           style="">
                                        <thead>
                                        <tr>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-priority="persist"
                                                class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                                data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">S/N<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-sortable-default-col=""
                                                data-tablesaw-priority="3"
                                                class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                                data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">PARTICULAR<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">DATE<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn"><abbr
                                                >STAFF</abbr><span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">AMOUNT (UGX)<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">STATUS<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">ACTION<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% for u in pending_expenditures %}
                                            <tr>
                                                <td class="title tablesaw-swipe-cellpersist"><a
                                                        href="javascript:void(0)">{{ forloop.counter }}</a>
                                                </td>
                                                <td>{{ u.item }}</td>
                                                <td>{{ u.date }}</td>
                                                <td>{{ u.staff.user.username }}</td>
                                                <td>{{ u.amount|intcomma }}/=</td>
                                                {% if u.status == 'Pending' %}
                                                    <td style="text-align: center">
                                                        <i class="fa fa-warning"></i>
                                                        <span class=" badge badge-warning"
                                                              style="padding: 5px!important;">Pending</span>
                                                    </td>

                                                {% elif u.status == 'Approved' %}
                                                    <td style="text-align: center">
                                                        <i class="fa fa-check"></i>
                                                        <span class=" badge badge-success"
                                                              style="padding: 5px!important;">Approved</span>
                                                    </td>
                                                {% else %}

                                                    <td style="text-align: center">
                                                        <i class="fa fa-close"></i>
                                                        <span class=" badge badge-danger"
                                                              style="padding: 5px!important;">Rejected</span>
                                                    </td>

                                                {% endif %}


                                                <td style="text-align: right">

                                                    {% if u.status == 'Rejected' %}

                                                        <button data-toggle="modal"
                                                                data-target="#modal-edit"
                                                                class="btn  btn-primary btn-sm"

                                                                onclick="
                                                                        document.getElementById('ex_cod').value='{{ u.code }}';
                                                                        document.getElementById('amountx').value='{{ u.amount }}';
                                                                        "

                                                        ><i
                                                                class="fa fa-ban"></i> Edit and
                                                            Resend
                                                        </button>


                                                    {% endif %}



                                                    {% if request.user.is_superuser %}
                                                        {% if u.status == 'Approved' %}
                                                            <a href="/approve_request/?code={{ u.code }}"
                                                               class="btn  btn-success btn-sm btn-block disabled"
                                                               onclick="return confirm('Confirm to Perform this action?');"
                                                            ><i
                                                                    class="fa fa-check"></i>
                                                                Approved
                                                            </a>
                                                        {% else %}
                                                            <a href="/approve_request/?code={{ u.code }}"
                                                               class="btn  btn-success btn-sm btn-block"
                                                               onclick="return confirm('Confirm to Perform this action?');"
                                                            ><i
                                                                    class="fa fa-check"></i> Approve
                                                            </a>

                                                        {% endif %}
                                                    {% else %}
                                                        <a href="/approve_request/?code={{ u.code }}"
                                                           class="btn  btn-success btn-sm btn-block disabled"
                                                           onclick="return confirm('Confirm to Perform this action?');"
                                                        ><i
                                                                class="fa fa-check"></i> Approve
                                                        </a>
                                                    {% endif %}

                                                    {% if request.user.is_superuser %}

                                                        <button data-toggle="modal"
                                                                data-target="#modal-reject"
                                                                class="btn  btn-danger btn-sm btn-block"

                                                                onclick="document.getElementById('ex_code').value='{{ u.code }}';
                                                                        {#                                                                                document.getElementById('ex_reason').value='{{ c.balance }}'#}
                                                                        "
                                                        ><i
                                                                class="fa fa-ban"></i> Reject
                                                        </button>
                                                    {% else %}


                                                    {% endif %}

                                                </td>

                                            </tr>

                                        {% endfor %}

                                        </tbody>
                                        <tfoot>
                                        <tr style="background-color: #c9c9c9">
                                            <th rowspan="1" colspan="1">S/N</th>
                                            <th rowspan="1" colspan="1">PARTICULAR</th>
                                            <th rowspan="1" colspan="1">DATE</th>
                                            <th rowspan="1" colspan="1">STAFF</th>
                                            <th rowspan="1" colspan="3">
                                            </th>

                                            <th rowspan="1" colspan="1"
                                                style="background-color: #c9c9c9">
                                                TOTAL: <b
                                                    style=" color: #000000!important; font-size: 20px!important;">{{ pending_total }}/=</b>
                                            </th>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="collapse" id="aproved_expenses" style="">
                            <div class="card card-body">
                                <h5 class="hk-sec-title text-center"><b>APPROVED EXPENSES</b>
                                </h5>
                                <div class="table-wrap">
                                    <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                           data-tablesaw-mode="swipe" data-tablesaw-sortable=""
                                           data-tablesaw-sortable-switch=""
                                           data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8447"
                                           style="">
                                        <thead>
                                        <tr>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-priority="persist"
                                                class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                                data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">S/N<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-sortable-default-col=""
                                                data-tablesaw-priority="3"
                                                class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                                data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">DATE<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">PARTICULAR<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn"><abbr
                                                >DESCRIPTION</abbr><span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">STAFF<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">AMOUNT<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">STATUS<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>

                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">ACTION<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>


                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% for u in approved_expenditures %}
                                            <tr>
                                                <td class="title tablesaw-swipe-cellpersist"><a
                                                        href="javascript:void(0)">{{ forloop.counter }}</a>
                                                </td>
                                                <td><b>{{ u.entered_on |date }}</b></td>
                                                <td>{{ u.item }}</td>
                                                <td>{{ u.description }}</td>
                                                <td>{{ u.staff.user.username }}</td>
                                                <td>{{ u.amount |intcomma }}/=</td>
                                                <td style="text-align: center">
                                                    <i class="fa fa-check"></i>
                                                    <span class=" badge badge-success"
                                                          style="padding: 5px!important;">Approved</span>
                                                </td>
                                                <td style="text-align: right">

                                                    {% if request.user.is_superuser %}
                                                        <button data-toggle="modal"
                                                                data-target="#modal-reject"
                                                                class="btn  btn-danger btn-block btn-sm"

                                                                onclick="document.getElementById('ex_code').value='{{ u.code }}';
                                                                        document.getElementById('ex_reason').value='{{ c.balance }}'
                                                                        "
                                                        ><i
                                                                class="fa fa-ban"></i> Reject
                                                        </button>
                                                    {% endif %}
                                                </td>


                                            </tr>

                                        {% endfor %}

                                        </tbody>
                                        <tfoot>
                                        <tr style="background-color: #b9c2af">
                                            <th rowspan="1" colspan="1">S/N</th>
                                            <th rowspan="1" colspan="1">DATE</th>
                                            <th rowspan="1" colspan="1">PARTICULAR</th>
                                            <th rowspan="1" colspan="1">DESCRIPTION</th>
                                            <th rowspan="1" colspan="1">STAFF</th>


                                            <th rowspan="1" colspan="2"
                                                style="background-color: #939393; text-align: center!important;"><span
                                                    style="color: white;">TOTAL: </span>
                                                <b style="color: #fff1ff!important; font-size: 20px!important;">{{ approved_total|intcomma }}/=</b>
                                            </th>
                                            <th rowspan="1" colspan="1">ACTION</th>
                                        </tr>
                                        </tfoot>


                                    </table>
                                </div>

                            </div>
                        </div>

                        <div class="collapse" id="rejected_expenses" style="">
                            <div class="card card-body">
                                <h5 class="hk-sec-title text-center"><b>REJECTED EXPENSES</b></h5>
                                <div class="table-wrap">

                                    <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                           data-tablesaw-mode="swipe" data-tablesaw-sortable=""
                                           data-tablesaw-sortable-switch=""
                                           data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8446"
                                           style="">
                                        <thead>
                                        <tr>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-priority="persist"
                                                class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                                data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">S/N<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col=""
                                                data-tablesaw-sortable-default-col=""
                                                data-tablesaw-priority="3"
                                                class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                                data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">DATE<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn">PARTICULAR<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                                <button class="tablesaw-sortable-btn"><abbr
                                                >REQUEST BY</abbr><span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">AMOUNT (UGX)<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">REASON<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">STATUS<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                            <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                                class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                                <button class="tablesaw-sortable-btn">ACTION<span
                                                        class="tablesaw-sortable-arrow"></span></button>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% for u in rejected_expenditures %}
                                            <tr>
                                                <td class="title tablesaw-swipe-cellpersist"><a
                                                        href="javascript:void(0)">{{ forloop.counter }}</a>
                                                </td>
                                                <td>{{ u.entered_on }}</td>
                                                <td><b>{{ u.item }}</b></td>
                                                <td>{% if u.staff.user.first_name %}
                                                    {{ u.staff.user.first_name }}
                                                    {{ u.staff.user.last_name }}
                                                    {% else %}{{ u.staff.user.username |capfirst }} {% endif %}</td>
                                                <td>{{ u.amount|intcomma }}</td>
                                                <td>{{ u.reason }}</td>
                                                <td style="text-align: center">
                                                    <b>X</b>
                                                    <span class=" badge badge-danger"
                                                          style="padding: 5px!important;">Rejected</span>
                                                </td>
                                                <td style="text-align: right">
                                                    {% if request.user.is_superuser %}

                                                        <a href="/delete_expenditure/?code={{ u.code }}"
                                                           class="btn  btn-outline-danger btn-sm"
                                                           onclick="return confirm('This Can not be Reverted. Are you sure you want to delete Permanently?');"
                                                        > <i
                                                                class="fa fa-trash-o"></i>
                                                            Delete</a>
                                                    {% else %}
                                                        <a href="/delete_expenditure/?code={{ u.code }}"
                                                           class="btn  btn-outline-danger btn-sm disabled"
                                                           onclick="return confirm('This Can not be Reverted. Are you sure you want to delete Permanently?');"
                                                        > <i
                                                                class="fa fa-trash-o"></i>
                                                            Delete</a>

                                                    {% endif %}
                                                </td>
                                            </tr>

                                        {% endfor %}

                                        </tbody>
                                        <tfoot>
                                        <tr style="background-color: #b9c2af">
                                            <th rowspan="1" colspan="1">S/N</th>
                                            <th rowspan="1" colspan="1">DATE</th>
                                            <th rowspan="1" colspan="1">PARTICULAR</th>
                                            <th rowspan="1" colspan="1">REQUEST BY</th>
                                            <th rowspan="1" colspan="1"
                                                style="background-color: rgba(222,8,13,0.96)!important;">
                                                <span style="color: white">TOTAL:</span> <b
                                                    style="color: #fff1ff!important; font-size: 20px!important;">{{ rejected_total |intcomma }}/=</b>
                                            </th>
                                            <th rowspan="1" colspan="1">REASON</th>
                                            <th rowspan="1" colspan="1">STATUS</th>

                                            <th rowspan="1" colspan="1">ACTION</th>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <section class="hk-sec-wrapper">
                <h5 class="hk-sec-title text-center"><b>INVENTORY</b></h5>

                <button type="button" class="btn btn-primary btn-sm"
                        style="background-color: #19385a;  box-shadow: 0 8px 6px -6px black;"
                        data-toggle="modal"
                        data-target="#modal-inventory"><i class="fa fa-cart-arrow-down"></i> ADD ITEM
                </button>
                <div class="row">

                    <div class="col-sm-12">
                        <div class="table-wrap">

                            <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                   data-tablesaw-mode="swipe" data-tablesaw-sortable="" data-tablesaw-sortable-switch=""
                                   data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8446" style="">
                                <thead>
                                <tr>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="persist"
                                        class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                        data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">S/N<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-sortable-default-col=""
                                        data-tablesaw-priority="3"
                                        class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                        data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn">DATE<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn">PARTICULAR<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn"><abbr
                                        >DESCRIPTION</abbr><span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">QTY<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">UNIT PRICE<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">TOTAL PRICE<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">ACTION<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                {% if inventory %}

                                    {% for u in inventory %}
                                        <tr>
                                            <td class="title tablesaw-swipe-cellpersist"><a
                                                    href="javascript:void(0)">{{ forloop.counter }}</a>
                                            </td>
                                            <td>{{ u.date }}</td>
                                            <td>{{ u.item }}</td>
                                            <td>{{ u.description }}</td>
                                            <td>{{ u.qty }}</td>
                                            <td>{{ u.unit_price | intcomma }}</td>
                                            <td>{{ u.total_price |intcomma }}</td>
                                            <td style="text-align: right">
                                                {% if request.user.is_superuser %}
                                                    <a href="/delete_inventory/?code={{ u.code }}"
                                                       class="btn  btn-outline-danger btn-block btn-sm"
                                                       onclick="return confirm('Are you sure you want to Remove this Item?');"
                                                    > <i
                                                            class="fa fa-trash-o"></i> Remove</a>
                                                {% endif %}
                                            </td>
                                        </tr>

                                    {% endfor %}
                                {% else %}
                                    <p style="color: red" class="text-center"><b>NO RECORDS FOUND</b></p>
                                {% endif %}

                                </tbody>
                                <tfoot>
                                <tr style="background-color: #c9c9c9">
                                    <th rowspan="1" colspan="1">S/N</th>
                                    <th rowspan="1" colspan="1">DATE</th>
                                    <th rowspan="1" colspan="1">PARTICULAR</th>
                                    <th rowspan="1" colspan="1">DESCRIPTION</th>
                                    <th rowspan="1" colspan="1">QTY</th>
                                    <th rowspan="1" colspan="1">UNIT PRICE</th>
                                    <th rowspan="1" colspan="1">TOTAL PRICE</th>
                                    <th rowspan="1" colspan="1">ACTION</th>
                                </tr>
                                </tfoot>
                            </table>
                        </div>

                    </div>
                </div>


            </section>


            <section class="hk-sec-wrapper">
                <h5 class="hk-sec-title text-center"><b>ASSIGNED WORK TO STAFF</b></h5>
                {% if request.user.is_superuser %}
                    <button type="button" class="btn btn-primary btn-sm mb-3"
                            style="background-color: #19385a;  box-shadow: 0 8px 6px -6px black;"
                            data-toggle="modal"
                            data-target="#modal-add_staff"><i class="fa fa-cart-arrow-down"></i> ADD STAFF TO PROJECT
                    </button>
                {% endif %}
                <div class="row">

                    <div class="col-sm-12">
                        <div class="table-wrap">

                            <table class="table tablesaw table-bordered table-hover mb-0 tablesaw-sortable tablesaw-swipe"
                                   data-tablesaw-mode="swipe" data-tablesaw-sortable="" data-tablesaw-sortable-switch=""
                                   data-tablesaw-minimap="" data-tablesaw-mode-switch="" id="tablesaw-8446" style="">
                                <thead>
                                <tr>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="persist"
                                        class="tablesaw-sortable-head tablesaw-swipe-cellpersist"
                                        data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">S/N<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-sortable-default-col=""
                                        data-tablesaw-priority="3"
                                        class="tablesaw-sortable-head tablesaw-sortable-ascending"
                                        data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn">STAFF NAME<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="2"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn"> TASKS TO DO<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="1"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="">
                                        <button class="tablesaw-sortable-btn"><abbr
                                        >STATUS</abbr><span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>

                                    <th scope="col" data-tablesaw-sortable-col="" data-tablesaw-priority="4"
                                        class="tablesaw-sortable-head" data-tablesaw-sortable-numeric="false">
                                        <button class="tablesaw-sortable-btn">ACTION<span
                                                class="tablesaw-sortable-arrow"></span></button>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                {% if project_staffs %}

                                    {% for u in project_staffs %}
                                        <tr>
                                            <td class="title tablesaw-swipe-cellpersist"><a
                                                    href="javascript:void(0)">{{ forloop.counter }}</a>
                                            </td>
                                            <td>{% if u.staff.user.first_name %}
                                                {{ u.staff.user.first_name |upper }}
                                                {{ u.staff.user.last_name |upper }}
                                            {% else %}
                                                {{ u.staff.user.username |upper }} {% endif %}</td>
                                            <td>{{ u.tasks_to_do }}</td>
                                            <td>{{ u.status }}</td>
                                            <td style="text-align: right">
                                                {% if request.user.is_superuser %}
                                                    <a href="/remove_staff_from_project/?id={{ u.id }}"
                                                       class="btn  btn-outline-danger btn-block btn-sm"
                                                       onclick="return confirm('Are you sure you want to Remove this Staff?');"
                                                    > <i
                                                            class="fa fa-trash-o"></i> Remove</a>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                        </tr>

                                    {% endfor %}
                                {% else %}
                                    <p style="color: red" class="text-center"><b>NO RECORDS FOUND</b></p>
                                {% endif %}

                                </tbody>
                                <tfoot>
                                <tr style="background-color: #c9c9c9">
                                    <th rowspan="1" colspan="1">S/N</th>
                                    <th rowspan="1" colspan="1">STAFF NAME</th>
                                    <th rowspan="1" colspan="1">TASKS TO DO</th>
                                    <th rowspan="1" colspan="1">STATUS</th>
                                    <th rowspan="1" colspan="1">ACTION</th>
                                </tr>
                                </tfoot>
                            </table>
                        </div>

                    </div>
                </div>

            </section>


        </div>
    </div>


    {#       ==================  MODALS   ============================    #}
    {#   INCOME MODAL #}
    <div class="modal fade" id="modal-income">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="background-color: #ffffff!important;">
                <div class="modal-header">
                    <h4 class="modal-title">ADD NEW INCOME</h4>
                    <button type="button" class="close" style="color: #ff1a06;" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/add_farm_income/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control"
                               id="code" name="code" value="{{ project.code }}" hidden>
                        <div class="form-group">
                            <label for="item">PARTICULAR *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   style="background-color: #626583!important; color: white!important;"
                                   placeholder="Enter Particular for income" required>
                        </div>

                        <div class="form-group">
                            <label for="income_category">INCOME CATEGORY *</label>
                            <select type="text" class="form-control" id="income_category" name="income_category"
                                    style="background-color: #626583!important; color: white!important;"
                                    placeholder="Enter Category">
                                <option value="Transport">Transport</option>
                                <option value="Utilities">Utilities</option>
                                <option value="Advert">Advert</option>
                                <option value="Salary">Salary</option>
                                <option value="Wages">Wages</option>
                                <option value="Building">Building</option>
                                <option value="Communication">Communication</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="item">DATE *</label>
                            <input type="date" class="form-control datepicker" id="date" name="date"
                                   style="background-color: #626583!important; color: white!important;"
                                   placeholder="Enter Date" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">AMOUNT *</label>
                            <input type="number" class="form-control" id="amount" name="amount"
                                   style="background-color: #626583!important; color: white!important;"
                                   placeholder="Enter Amount" required>
                        </div>

                        <div class="form-group">
                            <label for="qty">QUANTITY *</label>
                            <input type="number" class="form-control" id="qty" name="qty"
                                   style="background-color: #626583!important; color: white!important;"
                                   placeholder="Enter Quantity " required>
                        </div>


                        <div class="form-group">
                            <label for="category">SOURCE *</label>
                            <select type="text" class="form-control" id="category" name="category"
                                    style="background-color: #626583!important; color: white!important;"
                                    placeholder="Enter Category">
                                <option value="Farm Produce">Farm Produce</option>
                                <option value="Credit/ Loans">Credit/ Loans</option>
                                <option value="Insurance">Insurance</option>
                                <option value="Machine Income">Machine Income</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>


                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <textarea type="text" class="form-control" id="description" name="description"
                                      style="background-color: #626583!important; color: white!important;"
                                      placeholder="Enter Description" required></textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light"
                                style="background-color: #626583!important; color: white">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    {#   PENDING EXPENDITURE MODAL #}
    <div class="modal fade" id="modal-request">
        <div class="modal-dialog modal-lg">
            <div class="modal-content " style="background-color: #ffffff!important;">
                <div class="modal-header">
                    <h4 class="modal-title">{{ project.name |upper }} EXPENDITURE</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/request_expenditure/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}" hidden>
                        <div class="form-group">
                            <label for="item">PARTICULAR *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   style="background-color: #626583!important;color: white"
                                   placeholder="Enter Particular" required>
                        </div>
                        <div class="form-group">
                            <label for="date">DATE *</label>
                            <input type="date" class="form-control" id="date" name="date"
                                   placeholder="Enter Date" required
                                   style="background-color: #626583!important;color: white">
                        </div>

                        <div class="form-group">
                            <label for="expenditure_category">EXPENSE CATEGORY *</label>
                            <select type="text" class="form-control" id="expenditure_category" name="expenditure_category"
                                    style="background-color: #626583!important; color: white!important;">
                                <option value="Transport">Transport</option>
                                <option value="Utilities">Utilities</option>
                                <option value="Advert">Advert</option>
                                <option value="Salary">Salary</option>
                                <option value="Wages">Wages</option>
                                <option value="Building">Building</option>
                                <option value="Communication">Communication</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="amount">AMOUNT *</label>
                            <input type="text" class="form-control" id="amount" name="amount"
                                   placeholder="Enter Amount" required
                                   style="background-color: #626583!important;color: white">
                        </div>

                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <textarea type="text" class="form-control" id="description" name="description"
                                      style="background-color: #626583!important;color: white"
                                      placeholder="Enter Description" required> </textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light"
                                style="background-color: #626583!important; color: white">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modal_project_photo" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLongTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content ">
                <div class="modal-header" style="background-color: #ffffff; text-align: center!important;">
                    <h5 class="modal-title" id="modal-company" style="text-align: center">UPLOAD PROJECT PHOTO</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form class="form-horizontal" method="post" action="/update_project_photo/?code={{ project.code }}"
                      enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="modal-body">

                        <div class="form-group">
                            <input type="text" class="form-control" value="{{ project.code }}" id="code" name="code"
                                   hidden>

                            <div class="col-sm-12">

                                <input type="file" class="custom-file-input" id="image" name="image"
                                       style="background-color: #626583!important;color: white">
                                <label class="custom-file-label" for="logo">Choose Image File</label>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal"><i
                                class="fa fa-close"></i> Close
                        </button>
                        <button type="submit" class="btn btn-success"
                                style="background-color: #626583!important;color: white">UPLOAD PHOTO
                        </button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-reject">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">REJECT EXPENSE</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/reject_request/?code={{ pending_expenditures.code }}" method="post"
                      enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="ex_code" name="code" hidden>

                        <div class="form-group">
                            <label for="reason">Reason For Rejection *</label>
                            <textarea type="text" class="form-control" id="ex_reason" name="reason"
                                      style="background-color: #626583!important;color: white"
                                      placeholder="Enter the Reason why the request is Rejected!" required></textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn " style="background-color: #626583!important;color: white">
                            Submit
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade" id="modal-inventory">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-success" style="background-color: #ffffff!important;">
                <div class="modal-header">
                    <h4 class="modal-title">ADD INVENTORY ITEM</h4>
                    <button type="button" class="close" style="color: #ff1a06;" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/farm_inventory/?code={{ project.code }}" method="post" enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}" hidden>

                        <div class="form-group">
                            <label for="item">DATE OF PURCHASE *</label>
                            <input type="date" class="form-control" id="date" name="date"
                                   style="background-color: #626583!important;color: white"
                                   placeholder="Enter Date of Purchase" required>
                        </div>

                        <div class="form-group">
                            <label for="item">ITEM *</label>
                            <input type="text" class="form-control" id="item" name="item"
                                   style="background-color: #626583!important;color: white"
                                   placeholder="Enter Item" required>
                        </div>


                        <div class="form-group">
                            <label for="amount">QUANTITY *</label>
                            <input type="number" class="form-control parameter qty" id="qty" name="qty" min="0"
                                   style="background-color: #626583!important;color: white"
                                   placeholder="Enter Quantity" required>
                        </div>

                        <div class="form-group">
                            <label for="reason">UNIT PRICE *</label>
                            <input type="number" class="form-control parameter unit_price" id="unit_price"
                                   style="background-color: #626583!important;color: white"
                                   name="unit_price"
                                   placeholder="Enter Unit Price" required>
                        </div>


                        <div class="form-group">
                            <label for="reason">TOTAL PRICE</label>
                            <input type="number" class="form-control total" id="unit_price" name="unit_price"
                                   style="background-color: #626583!important;color: white"
                                   disabled>
                        </div>

                        <div class="form-group">
                            <label for="description">FULL DESCRIPTION *</label>
                            <textarea type="text" class="form-control" id="description" name="description"
                                      style="background-color: #626583!important;color: white"
                                      placeholder="Enter Description" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="reference_copy">UPLOAD REFERENCE PHOTOCOPY</label>
                            <input type="file" class="form-control-file" id="reference_copy" name="reference_copy"
                                   style="background-color: #626583!important;color: white">
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light"
                                style="background-color: #626583!important;color: white">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade" id="modal-edit">
        <div class="modal-dialog modal-lg">
            <div class="modal-conten">
                <div class="modal-header">
                    <h4 class="modal-title">EDIT AND SEND</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/edit_and_request/?code={{ pending_expenditures.code }}" method="post"
                      enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">
                        <input type="text" class="form-control" id="ex_cod" name="code" hidden>

                        <div class="form-group">
                            <label for="amount">Amount Requested *</label>
                            <input type="text" class="form-control" id="amountx" name="amount"
                                   style="background-color: #626583!important;color: white"
                            >
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-outline-light"
                                style="background-color: #626583!important;color: white">Submit
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


    <div class="modal fade" id="modal-add_staff">
        <div class="modal-dialog modal-lg">
            <div class="modal-content " style="background-color: #ffffff!important;">
                <div class="modal-header">
                    <h4 class="modal-title">ADD STAFF TO PROJECT</h4>
                    <button type="button" class="close" style="color: #ff1a06;" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/add_staff_to_project/?code={{ project.code }}" method="post"
                      enctype="multipart/form-data"
                      autocomplete="off">
                    {% csrf_token %}
                    <div class="modal-body">

                        <input type="text" class="form-control" id="code" name="code" value="{{ project.code }}"
                               hidden/>


                        <div class="form-group">
                            <label for="item">STAFF *</label>
                            <select type="text" class="form-control" id="staff" name="staff"
                                    style="background-color: #626583!important;color: white"
                                    placeholder="Enter Particular for income" required>
                                {% for u in users %}
                                    <option value="{{ u.user.email }}">{{ u.user.first_name |upper }} {{ u.user.last_name |upper }}</option>
                                {% endfor %}
                            </select>
                        </div>


                        <div class="form-group">
                            <label for="qty">TASKS TO DO *</label>
                            <textarea type="text" class="form-control" id="tasks_to_do" name="tasks_to_do"
                                      style="background-color: #626583!important;color: white"
                                      placeholder="Enter Tasks to Do " required></textarea>
                        </div>


                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">CLOSE</button>
                        <button type="submit" class="btn btn-outline-light"
                                style="background-color: #626583!important;color: white">
                            SUBMIT
                        </button>
                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

{% endblock %}

{% block javascript %}
    <script>
        // === PEREZ WORKING CODE ===
        $(document).ready(function () {
            $(".parameter").on("input", function () {
                var total = 0;
                var qty = $(".qty").val();
                var unit_price = $(".unit_price").val();
                console.log('xxxxx', qty, unit_price);
                console.log('xxxxx', parseFloat(qty) * parseFloat(unit_price));

                if (!isNaN(parseInt($(this).val()))) {
                    total = parseFloat(qty) * parseFloat(unit_price);
                    console.log('my total', total);
                    $(".total").val(total);
                }

            });
        })
    </script>

{% endblock %}

